{
  "hash": "ee8ef49106d11a22fe56927277a3b77f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Vacancy and Land Use - Sharswood\"\nsubtitle: \"URBS 4000: Urban Studies Thesis\"\nauthor: \"Jed Chew\"\ndate: today\nformat: \n  html:\n    code-fold: false\n    toc: true\n    toc-location: left\n    theme: cosmo\n    embed-resources: true\nexecute:\n  warning: false\n  message: false\neditor: \n  markdown: \n    wrap: 80\n---\n\n## Project Title: Mixed by Design\n\n### *A Case Study of the Philadelphia Housing Authority's (PHA) Choice Neighborhoods Redevelopment of Sharswood*\n\nFor my Urban Studies thesis, I am researching the PHA's Choice Neighborhoods\nredevelopment of the Sharswood neighborhood in North Philadelphia. I have two\nmain research questions about the process and outcome of this redevelopment:\n\n\\(1\\) the **process** by which the PHA aligned the politics, finance, and design\nfor the redevelopment of Sharswood; andÂ \n\n\\(2\\) the early redevelopment **outcomes** relative to the Choice Neighborhoods\nInitiative (CNI) vision of mixed-partners, mixed-use, and mixed-income\n\n## Part 1: Vacancy Data\n\n**Vacant Property Indicators from Open Data Philly**\n\n-   Data Source:\n    <https://opendataphilly.org/datasets/vacant-property-indicators/>\n\n-   Date Downloaded: Oct 20, 2025\n\n-   Description: The location of properties across Philadelphia that are likely\n    to be a vacant lot or vacant building based on an assessment of City of\n    Philadelphia administrative datasets.\n\n-   Types of GeoJSON Files: Buildings, Land, and Points\n\n### Step 1: Load Raw Data as csv files\n\n-   Philadelphia census tracts, block groups, and neighborhood boundaries\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load spatial data\ncensus_tracts <- tracts(state = \"PA\", county = \"Philadelphia\", year = 2020, class = \"sf\", cb = TRUE, progress = FALSE)\nblock_grps <- block_groups(state = \"PA\", county = \"Philadelphia\", year = 2020, class = \"sf\",cb = TRUE, progress = FALSE)\n\n# Filter Block Groups for Sharswood\nids <- c(\"421010138001\",\"421010138002\",\"421010139001\",\n         \"421010139002\",\"421010139003\")\n\nsharswood_bg_sf <- block_grps |>\n filter(GEOID %in% ids) |> \n  st_transform(2272) # PA State Plane (in US Survey Feet)\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n### Step 2: Get Philadelphia Demographic Data using `tidycensus`\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load all available variables for ACS 5-year 2022\nacs_vars_2022 <- load_variables(2022, \"acs5\", cache = TRUE)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Helper Variables for Summing Population Values for Children aged 5-19\nchild_pop = c(\"B01001_004\", \"B01001_005\", \"B01001_006\", \"B01001_007\", \n                \"B01001_028\", \"B01001_029\", \"B01001_030\", \"B01001_031\")\n\n\n# Helper Variable for Summing Population Values for Elderly Population\nelderly_pop = c(\"B01001_020\", \"B01001_021\", \"B01001_022\", \"B01001_023\", \n                \"B01001_024\", \"B01001_025\", \n                \"B01001_044\", \"B01001_045\", \"B01001_046\", \n                \"B01001_047\", \"B01001_048\", \"B01001_049\")\n\n# Get tract-level demographic data from 2022 ACS 5-Yr Estimates for Philadelphia\nphl_tract_2022_data <- get_acs(\n  geography = \"tract\",\n  variables = c(\n    total_pop = \"B01003_001\",\n    child_pop = child_pop,\n    elderly_pop = elderly_pop,\n    median_income = \"B19013_001\",\n    poverty = \"B17001_001\",\n    White     = \"B03002_003\",\n    Black     = \"B03002_004\",\n    Hispanic  = \"B03002_012\"\n  ),\n  state = \"PA\",\n  county = \"Philadelphia\",\n  year = 2022,\n  survey = \"acs5\",\n  output = \"wide\",\n  geometry = TRUE\n)\n\n# Clean the county names to remove state name and \"County\" \nphl_tract_2022_clean <- phl_tract_2022_data |> \n  separate(\n    NAME, \n    into = c(\"tract_name\", \"county_name\", \"state_name\"), \n    sep = \"; \"\n  ) |> \n  mutate(\n    tract_name = str_remove(tract_name, \"Census Tract \"),\n    county_name = str_remove(county_name, \" County\")\n  )\n\nphl_tract_2022_summary <- phl_tract_2022_clean |>\n  mutate(\n    elderly_popE = rowSums(across(matches(\"^elderly_pop\\\\d+E$\")), na.rm = TRUE),\n    # for MOE, ACS guidance is to combine by quadrature\n    elderly_popM = sqrt(rowSums(across(matches(\"^elderly_pop\\\\d+M$\"))^2, na.rm = \n                                  TRUE)),\n    pct_elderly = round((elderly_popE / total_popE) *100, 2),\n    child_popE = rowSums(across(matches(\"^child_pop\\\\d+E$\")), na.rm = TRUE),\n    child_popM = sqrt(rowSums(across(matches(\"^child_pop\\\\d+M$\"))^2, na.rm = \n                                  TRUE)),\n    pct_child = round((child_popE/total_popE) * 100, 2),\n  ) |>\n  select(GEOID, tract_name, county_name, total_popE, median_incomeE, elderly_popE, \n         elderly_popM, pct_elderly, child_popE, child_popM, pct_child)\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n### Step 3: Filter Data for Sharswood\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Filter Census Tracts for Sharswood\nsharswood_2022_tract_sf <- phl_tract_2022_summary |> \n  filter(tract_name %in% c(\"138\", \"139\"))\n\nggplot(sharswood_2022_tract_sf) +\n  geom_sf() +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](vacancy_land_use_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\nsharswood_2022_tract <- sharswood_2022_tract_sf |> \n  st_drop_geometry()\nsharswood_2022_tract\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n### Step 4: Plot Maps of Vacant Buildings, Land, and Points in Sharswood\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsharswood_land_parcels <- st_read(\"data/sharswood_parcels.geojson\")\n\nggplot() +\n  geom_sf(data = sharswood_bg_sf, fill = \"gray97\", color = \"gray50\", linewidth = 0.3) +\n  geom_sf(data = sharswood_land_parcels, fill = NA, color = \"gray50\", linewidth = 0.6) +\n  labs(title = \"Property Parcels in Sharswood\") +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](vacancy_land_use_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvacant_bldgs <- st_read(\"data/Vacant_Indicators_Bldg.geojson\")\nvacant_land <- st_read(\"data/Vacant_Indicators_Land.geojson\")\nvacant_pts <- st_read(\"data/Vacant_Indicators_Points.geojson\")\n\nsharswood_zip <- 19121\n\nsharswood_vacant_bldgs <- vacant_bldgs |> \n  st_transform(st_crs(sharswood_bg_sf)) |> \n  filter(zipcode == sharswood_zip) |> \n  st_filter(sharswood_bg_sf, .predicate = st_intersects)\n\nsharswood_vacant_land <- vacant_land |> \n  st_transform(st_crs(sharswood_bg_sf)) |> \n  filter(ZIPCODE == sharswood_zip) |> \n  st_filter(sharswood_bg_sf, .predicate = st_intersects)\n\nsharswood_vacant_pts <- vacant_pts |> \n  st_transform(st_crs(sharswood_bg_sf)) |> \n  filter(ZIPCODE == sharswood_zip) |> \n  st_filter(sharswood_bg_sf, .predicate = st_within)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = sharswood_land_parcels, fill = NA, color = \"gray50\", linewidth = 0.6) +\n  geom_sf(data = sharswood_vacant_bldgs, aes(fill = bldg_desc)) +\n  labs(\n    title = \"Vacant Buildings in Sharswood\",\n    subtitle = \"Date Last Updated: July 7, 2025\") +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](vacancy_land_use_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = sharswood_land_parcels, fill = NA, color = \"gray50\", linewidth = 0.6) +\n  geom_sf(data = sharswood_vacant_land, aes(fill = ZONINGBASEDISTRICT)) +\n  labs(\n    title = \"Vacant Land in Sharswood\",\n    subtitle = \"Date Last Updated: March 24, 2025\") +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](vacancy_land_use_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = sharswood_land_parcels, fill = NA, color = \"gray50\", linewidth = 0.6) +\n  geom_sf(data = sharswood_vacant_pts, aes(color = VACANT_FLAG)) +\n  labs(\n    title = \"Vacant Points in Sharswood\",\n    subtitle = \"Date Last Updated: March 24, 2025\") +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](vacancy_land_use_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n--------------------------------------------------------------------------------\n\n## Part 2: Land-Use Data\n\n--------------------------------------------------------------------------------\n\n-   Data Source: <https://opendataphilly.org/datasets/land-use/>\n\n-   Date Downloaded: Oct 20, 2025\n\n-   Description: City of Philadelphia land use as ascribed to individual parcel\n    boundaries or units of land. Land use is the type of activity occurring on\n    the land such as residential, commercial or industrial. Each unit of land is\n    assigned one of nine major classifications of land use (2-digit code), and\n    where possible a more narrowly defined sub-classification (3-digit code).\n    The land use feature class has been field checked and corrected for the\n    following Planning Districts.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# curr_land_use <- st_read(\"data/Land_Use.geojson\")\n\n# sharswood_land_use <- curr_land_use |> \n  # st_transform(st_crs(sharswood_bg_sf)) |> \n  # st_filter(sharswood_bg_sf, .predicate = st_intersects)\n\n# land_use_2012_2018 <- st_Read(\"data/Land_Use_2012_2018.gejson\")\n\n# sharswood_historical_land_use <- land_use_2012_2018 |> \n  # st_transform(st_crs(sharswood_bg_sf)) |> \n  # st_filter(sharswood_bg_sf, .predicate = st_intersects)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# need to use a filtered .geojson with file size < 100 MB\nsharswood_land_use <- st_read(\"data/sharswood_land_use.geojson\") |>\n  st_transform(st_crs(sharswood_bg_sf))\n\nggplot(sharswood_land_use) +\n  geom_sf() +\n  theme_void()\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n## Part 3: Comprehensive Visualization and Analysis\n\n--------------------------------------------------------------------------------\n\n### Step 1: Rename Columns for ACS Year\n\n### Step 2: Facet Maps by Period\n\n### Step 3: Change Maps\n",
    "supporting": [
      "vacancy_land_use_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}