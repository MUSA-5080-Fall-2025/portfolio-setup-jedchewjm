"0","# Get census tract poverty data for Philadelphia"
"0","philly_poverty <- get_acs("
"0","    geography = ""tract"","
"0","    variables = c("
"0","      poverty_pop = ""B17001_001"",     "
"0","      poverty_below = ""B17001_002""    "
"0","    ),"
"0","    state = ""PA"","
"0","    county = ""101"","
"0","    year = 2022,"
"0","    output = ""wide"""
"0","  ) %>%"
"0","  filter(poverty_popE > 0) %>%  # Remove tracts with no poverty data"
"0","  mutate("
"0","    # Calculate poverty rate and its MOE"
"0","    poverty_rate = (poverty_belowE / poverty_popE) * 100,"
"0","    "
"0","    # MOE for derived percentage using error propagation"
"0","    poverty_rate_moe = poverty_rate * sqrt((poverty_belowM/poverty_belowE)^2 + (poverty_popM/poverty_popE)^2),"
"0","    "
"0","    # Coefficient of variation"
"0","    poverty_cv = (poverty_rate_moe / poverty_rate) * 100,"
"0","    "
"0","    # Reliability assessment"
"0","    reliability = case_when("
"0","      poverty_cv < 12 ~ ""High"","
"0","      poverty_cv <= 40 ~ ""Moderate"","
"0","      poverty_cv <= 75 ~ ""Low"","
"0","      TRUE ~ ""Very Low"""
"0","    ),"
"0","    "
"0","    # Color coding"
"0","    reliability_color = case_when("
"0","      reliability == ""High"" ~ ""ðŸŸ¢"","
"0","      reliability == ""Moderate"" ~ ""ðŸŸ¡"","
"0","      reliability == ""Low"" ~ ""ðŸŸ "","
"0","      TRUE ~ ""ðŸ”´"""
"0","    ),"
"0","    "
"0","    # Population size categories"
"0","    pop_category = case_when("
"0","      poverty_popE < 500 ~ ""Very Small (<500)"","
"0","      poverty_popE < 1000 ~ ""Small (500-1000)"","
"0","      poverty_popE < 1500 ~ ""Medium (1000-1500)"","
"0","      TRUE ~ ""Large (1500+)"""
"0","    )"
"0","  )"
"0",""
"0","# Check the data quality crisis at tracts"
"0","reliability_summary <- philly_poverty %>%"
"0","  count(reliability) %>%"
"0","  mutate("
"0","    percentage = round(n / sum(n) * 100, 1),"
"0","    total_bg = sum(n)"
"0","  )"
"0",""
"0","print(""Philadelphia Census Tract Poverty Data Reliability:"")"
"1","[1]"
"1"," ""Philadelphia Census Tract Poverty Data Reliability:"""
"1","
"
"0","reliability_summary %>%"
"0","  kable("
"0","    col.names = c(""Data Quality"", ""Number of Tracts"", ""Percentage"", ""Total""),"
"0","    caption = ""The Data Quality Crisis: Philadelphia Census Tract Poverty Estimates"""
"0","  ) %>%"
"0","  kable_styling()"
