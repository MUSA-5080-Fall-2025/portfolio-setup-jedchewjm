"0","# Get housing cost data"
"0","housing_data <- get_acs("
"0","  geography = ""county"","
"0","  variables = c("
"0","    median_rent = ""B25058_001"",     # Median contract rent"
"0","    median_home_value = ""B25077_001"" # Median value of owner-occupied units"
"0","  ),"
"0","  state = state_choice,"
"0","  year = 2022,"
"0","  output = ""wide"""
"0",") %>%"
"0","  select(GEOID, median_rent = median_rentE, median_home_value = median_home_valueE)"
"0",""
"0","# Join all three datasets"
"0","full_data <- combined_data %>%"
"0","  left_join(housing_data, by = ""GEOID"")"
"0",""
"0","# Create a housing affordability measure"
"0","full_data <- full_data %>%"
"0","  mutate("
"0","    rent_to_income = (median_rent * 12) / median_incomeE * 100,"
"0","    income_category = case_when("
"0","      median_incomeE < 50000 ~ ""Low Income"","
"0","      median_incomeE < 80000 ~ ""Middle Income"","
"0","      TRUE ~ ""High Income"""
"0","    )"
"0","  )"
"0",""
"0","head(full_data)"
